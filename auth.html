// SIGNUP
if (mode === "signup") {
  const { data, error } = await supabase.auth.signUp({
    email,
    password
  });

  if (error) {
    alert("Signup error: " + error.message);
    return;
  }

  // CREATE PROFILE ROW
  if (data.user) {
    const username = email.split("@")[0].toLowerCase();

    const { error: profileError } = await supabase
      .from("profiles")
      .insert({
        id: data.user.id,
        username,
        xp: 0,
        level: 1,
        rank_points: 0
      });

    if (profileError) {
      alert("Profile creation failed: " + profileError.message);
      console.log(profileError);
    }
  }

  alert("Account created! Check your email to confirm.");
  return;
}
