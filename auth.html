<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RIVL â€” Login</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    background: #000;
    font-family: Inter, sans-serif;
    color: #fff;
    min-height: 100vh;
    display: grid;
    place-items: center;
    padding: 40px;
  }

  .auth-box {
    width: 100%;
    max-width: 360px;
    background: #0f0f12;
    border: 1px solid #23232b;
    padding: 28px;
    border-radius: 4px;
    box-shadow: 0 0 22px rgba(255,0,60,0.5);
  }

  h1 {
    text-align: center;
    font-size: 1.6rem;
    margin-bottom: 18px;
    color: #ff003c;
    text-transform: uppercase;
    font-weight: 900;
  }

  input {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    background: #0a0a0d;
    border: 1px solid #23232b;
    color: #fff;
    border-radius: 3px;
    font-size: 1rem;
  }

  button {
    width: 100%;
    padding: 12px;
    margin-top: 4px;
    background: linear-gradient(180deg, #ff2455, #ff003c);
    border: none;
    color: #fff;
    font-size: 1rem;
    font-weight: 800;
    cursor: pointer;
    border-radius: 3px;
    box-shadow: 0 0 14px rgba(255, 0, 60, 0.6);
  }

  button:hover {
    background: linear-gradient(180deg, #ff003c, #b8002e);
  }

  .toggle {
    margin-top: 14px;
    text-align: center;
    color: #9a9aa1;
    cursor: pointer;
  }

  .toggle:hover {
    color: #ff003c;
  }
</style>
</head>

<body>

<div class="auth-box">
  <h1 id="mode-title">Login</h1>

  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Password" required />

  <button id="auth-btn">Login</button>

  <div class="toggle" id="toggle-mode">
    No account? Create one
  </div>
</div>

<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const SUPABASE_URL = "https://evlelsygprwpvhfppxmn.supabase.co";
  const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bGVsc3lncHJ3cHZoZnBweG1uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4Mzk2NDksImV4cCI6MjA3OTQxNTY0OX0.eyGrS_TUd6VYJ_gLVyzpdT5_bJ_5wBM5PHZpAN62LVY";

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON);

  let mode = "login"; // "login" or "signup"

  document.getElementById("toggle-mode").onclick = () => {
    mode = mode === "login" ? "signup" : "login";
    document.getElementById("mode-title").textContent = mode === "login" ? "Login" : "Create Account";
    document.getElementById("auth-btn").textContent = mode === "login" ? "Login" : "Sign Up";
    document.getElementById("toggle-mode").textContent =
      mode === "login" ? "No account? Create one" : "Already have an account? Login";
  };

  document.getElementById("auth-btn").onclick = async () => {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!email || !password) {
      alert("Fill in all fields");
      return;
    }

    if (mode === "signup") {
      const { data, error } = await supabase.auth.signUp({ email, password });

      if (error) return alert("Error: " + error.message);

      alert("Account created! Check your email to confirm.");
    } else {
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });

      if (error) return alert("Wrong email or password.");

      alert("Logged in!");
      window.location.href = "/"; // Go back to main site after login
    }
  };
</script>

</body>
</html>
